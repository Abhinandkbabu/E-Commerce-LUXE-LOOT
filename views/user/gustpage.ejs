<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gust</title>
  <link rel="stylesheet" href="../../css/user/nav.css">
  <link rel="stylesheet" href="../../css/user/main.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</head>
<header>
	<nav>
    <div class="logo">
       <div class="emblem">
        <span class="left">L</span>
        <span class="middle">|</span>
        <span class="left">L</span>
        <span class="letter">UXE LOOT</span>
       </div>
    </div>
    <form class="search-form"  id="search-form">
      <input type="search" name="SearchInput" id="searchinput" placeholder="Search" class="search-input">
      <button type="submit" class="search-button">
        <svg class="submit-button">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#search"></use>
        </svg>
      </button>
    </form>

    
    <svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" display="none">
      <symbol id="search" viewBox="0 0 32 32">
        <path d="M 19.5 3 C 14.26514 3 10 7.2651394 10 12.5 C 10 14.749977 10.810825 16.807458 12.125 18.4375 L 3.28125 27.28125 L 4.71875 28.71875 L 13.5625 19.875 C 15.192542 21.189175 17.250023 22 19.5 22 C 24.73486 22 29 17.73486 29 12.5 C 29 7.2651394 24.73486 3 19.5 3 z M 19.5 5 C 23.65398 5 27 8.3460198 27 12.5 C 27 16.65398 23.65398 20 19.5 20 C 15.34602 20 12 16.65398 12 12.5 C 12 8.3460198 15.34602 5 19.5 5 z" />
      </symbol>
    </svg>


		<ul class="navigation-menu">
			<li><a href="/">Home</a></li>
			<li class="extends"><a href="#">Products</a>
				<ul>
					<li><a href="/productList/1">All Product</a></li>

					<!-- <li class="extends"><a href="#">Cat Supplies</a>
						<ul>
							<li><a href="#">Food & Treats</a></li>
							<li><a href="#">Toys</a></li>
							<li><a href="#">Beds & Furniture</a></li>
						</ul>
					</li>

					<li class="extends"><a href="#">Bird Supplies</a>
						<ul>
							<li><a href="#">Food & Treats</a></li>
							<li><a href="#">Toys</a></li>
							<li><a href="#">Furniture</a></li>
						</ul>
					</li>
					<li class="extends"><a href="#">Fish Supplies</a>
						<ul>
							<li><a href="#">Food</a></li>
							<li><a href="#">Aquariums</a></li>
							<li><a href="#">Rocks & Decorations</a></li>
						</ul>
					</li> -->
				</ul>
			</li>

			<li><a href="/cart">
        <i class="fa fa-shopping-cart"></i>
      </a></li>
			<li><a href="#">
        <i class="fa-solid fa-heart"></i>
      </a></li>
			<li class="extends">
				<a href="#" style="margin-right: 45px;"><i class="fa-solid fa-user"></i><span class="ms-1">Gust</span></a>
				<ul>
					<li><a href="/signIn"><i class="fa-solid fa-right-to-bracket"></i>&nbsp;Login</a></li>
					<li><a class="dropdown-item" href="/orders"><i class="fa fa-list"></i> My Orders</a></li>
          <li><a class="dropdown-item" href="#"><i class="fa fa-heart"></i> My Wishlist</a></li>
          <li><a class="dropdown-item" href="/cart"><i class="fa fa-shopping-cart"></i> My Cart</a></li>
				</ul>
			</li>
		</ul>
	</nav>
</header>

<body>
  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-inner">
    <% if(mainbanner.length){ %>
      <% mainbanner.forEach((banner, index)=>{ %>
        <% if(index==0){%>
          <div class="carousel-item active">
            <img src="/uploads/<%= banner.image %>" class="d-block w-100" alt="Slide 1">
          </div>
        <%}else{%>
          <div class="carousel-item">
            <img src="/uploads/<%= banner.image %>" class="d-block w-100" alt="Slide 1">
          </div>
        <%}%>
      <%}) %>
    <% }else{ %>
      <div class="carousel-item active">
        <img src="/images/banner1.jpg" class="d-block w-100" alt="Slide 1">
      </div>
    <% } %>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
  
  <!-- ...................special product................................ -->
  
  <div class='special-product'>
    <h3 class="title-shop">New Arrival</h3>
    <main class="main bd-grid">
        <% data.forEach(data=>{ %>
            <article class="card">
                <a href="/productView/<%- data._id %>">
                    <div class="card__img">
                    <img src="/uploads/<%= data.images[0] %>" alt="">
                    </div>
                </a>
                <div class="card__name">
                    <a class="text-light" href="/productView/<%- data._id %>"><p><%= data.productName %></p></a>
                </div>
                <div class="card__precis">
                    <a href="" class="card__icon" ><ion-icon name="heart-outline"></ion-icon></a>
                    
                    <div>
                        <span class="card__preci card__preci--before text-decoration-line-through">₹<%= data.price %></span>
                        <span class="card__preci card__preci--now">₹<%= data.discountPrice %></span>
                    </div>
                    <a onclick="addToCart('<%- data._id %>')" class="card__icon"><ion-icon name="cart-outline"></ion-icon></a>
                </div>
            </article>
        <%})%>
    </main>
    
</div>
<% if(mensProduct.length!=0){ %>

  <div class='special-product'>
    <h3 class="title-shop">Best Offers</h3>
    <main class="main bd-grid">
        <% mensProduct.forEach(data=>{ %>
            <article class="card">
                <a href="/productView/<%- data._id %>">
                    <div class="card__img">
                    <img src="/uploads/<%= data.images[0] %>" alt="">
                    </div>
                </a>
                <div class="card__name">
                    <a class="text-light" href="/productView/<%- data._id %>"><p><%= data.productName %></p></a>
                </div>
                <div class="card__precis">
                    <a href="" class="card__icon" ><ion-icon name="heart-outline"></ion-icon></a>
                    
                    <div>
                        <span class="card__preci card__preci--before text-decoration-line-through">₹<%= data.price %></span>
                        <span class="card__preci card__preci--now">₹<%= data.discountPrice %></span>
                        <% if(data.stock) {%> <span class="text-danger">Stock Out</span> <% } %>
                    </div>
                    <a onclick="addToCart('<%- data._id %>')" class="card__icon"><ion-icon name="cart-outline"></ion-icon></a>
                </div>
            </article>
        <%})%>
    </main>
    
</div>
<% } %>
</body>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

footer,
footer::before,
footer::after {
  box-sizing: border-box;
}

/* * {
  margin: 0;
  padding: 0;
} */

/* body {
  line-height: 1.5;
  font-family: 'Poppins', sans-serif;
}
 */
.footer {
  background-color: #151515;
  padding: 50px 0;
    text-align: left;
}

.container {
  max-width: 1170px;
  margin: auto;
}

.row {
  display: flex;
  flex-wrap: wrap;
}

.footer-col ul {
  list-style: none;
    padding-left: 0;
}

.footer-col {
  width: 25%;
  padding: 0 15px;
}

.footer-col h4 {
  font-size: 18px;
  color: #FFF;
  text-transform: capitalize;
  margin-bottom: 35px;
  font-weight: 500;
  position: relative;
}

.footer-col h4::before {
  content: "";
  position: absolute;
  left: 5%;
  bottom: -10px;
  background-color: #E91E63;
  width: 50px;
  height: 2px;
}

.footer-col ul li:not(:last-child) {
  margin-bottom: 10px;
}

.footer-col ul li a {
  color: #DDD;
  display: block;
  font-size: 1rem;
  font-weight: 300;
  text-transform: capitalize;
  text-decoration: none;
  transition: all 0.3s ease;
}

.footer-col ul li a:hover {
  color: #FFF;
  padding-left: 7px;
}

.footer-col .social-links a {
  color: #FFF;
  background-color: rgba(255, 255, 255, 0.2);
  display: inline-block;
  height: 40px;
  width: 40px;
  border-radius: 50%;
  text-align: center;
  margin: 0 10px 10px 0;
  line-height: 40px;
  transition: all 0.5s ease;
}

.footer-col .social-links a:hover {
  color: #151515;
  background-color: #FFF;
}

@media(max-width: 767px) {
  .footer-col {
    width: 50%;
    margin-bottom: 30px;
  }
}

@media(max-width: 574px) {
  .footer-col {
    width: 100%;
  }
}

</style>
<footer class="footer mt-5">
    <div class="container row">
        <div class="footer-col">
            <h4>company</h4>
            <ul>
                <li><a href="#">about us</a></li>
                <li><a href="#">our services</a></li>
                <li><a href="#">privacy policy</a></li>
                <li><a href="#">visit website</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>get help</h4>
            <ul>
                <li><a href="#">FAQ</a></li>
                <li><a href="#">shipping</a></li>
                <li><a href="#">returns</a></li>
                <li><a href="#">order status</a></li>
                <li><a href="#">payment options</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>online shop</h4>
            <ul>
                <li><a href="#">download</a></li>
                <li><a href="#">changelog</a></li>
                <li><a href="#">github</a></li>
                <li><a href="#">all version</a></li>
            </ul>
        </div>
        <div class="footer-col">
            <h4>follow us</h4>
            <div class="social-links">
                <a href="#"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#"><i class="fa-brands fa-x-twitter"></i></a>
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-linkedin-in"></i></a>
            </div>
        </div>
    </div>
</footer>

<script>

$(document).ready(function() {
        const h ="/search"
    // Add submit event listener to the form
    $('#search-form').submit(function(event) {
        // Prevent the default form submission behavior
        event.preventDefault();

        // Get the value of the search input field
        const searchInputValue = $('#searchinput').val();

        location.href=`/search/${searchInputValue}`

        // You can also submit the form programmatically if needed
        // $('.search-form').submit();
    });
});


    function addToCart(productId) {
      $.ajax({
          url: `/addtocart/${productId}`,
          method: 'GET',
          success: function(res) {
              if (res.user && res.response) {
                  Toastify({
                      text: res.msg,
                      duration: 800,
                      close: false,
                      gravity: "bottom",
                      position: 'center',
                      style: {
                          background: "rgba(169, 23, 148)", // Set the background color with opacity
                          color: "#fff",
                          borderRadius: "15px",
                      }
                  }).showToast();
              } else if(res.user && !res.response){
                  Toastify({
                      text: res.msg,
                      duration: 800,
                      close: false,
                      gravity: "bottom",
                      position: 'center',
                      style: {
                          background: "rgba(169, 23, 148)", // Set the background color with opacity
                          color: "#fff",
                          borderRadius: "15px",
                      }
                  }).showToast();
              }else{
                Toastify({
                      text: 'Plese login',
                      duration: 800,
                      close: false,
                      gravity: "bottom",
                      position: 'center',
                      style: {
                          background: "rgba(169, 23, 148)", // Set the background color with opacity
                          color: "#fff",
                          borderRadius: "15px",
                      }
                  }).showToast();
              }
              // Show toast notification
          },
          error: function(error) {
              // Show toast notification for error, if needed
              toastr.error('Failed to add item to cart');
          }
      });
  }
  
  document.addEventListener('DOMContentLoaded', function() {
    let carousel = document.querySelector('#carouselExampleIndicators');
    let carouselInstance = new bootstrap.Carousel(carousel, {
        interval: 4000 // Set interval to 4 seconds
    });

    // Add event listener for when the carousel transitions to a new slide
    carousel.addEventListener('slide.bs.carousel', function() {
        let activeSlide = carousel.querySelector('.carousel-item.active');
        let nextSlide = carousel.querySelector('.carousel-item.next');

        // Apply smooth sliding effect using CSS transitions
        activeSlide.style.transition = 'transform 0.5s ease-in-out';
        nextSlide.style.transition = 'transform 0.5s ease-in-out';

        // Slide the active slide to the left and the next slide to the center
        activeSlide.style.transform = 'translateX(-100%)';
        nextSlide.style.transform = 'translateX(0)';
    });

    // Add event listener for when the carousel has finished sliding to a new slide
    carousel.addEventListener('slid.bs.carousel', function() {
        let activeSlide = carousel.querySelector('.carousel-item.active');
        let nextSlide = carousel.querySelector('.carousel-item.next');

        // Remove transition after sliding is complete to avoid interference with automatic sliding
        activeSlide.style.transition = '';
        nextSlide.style.transition = '';
    });

    // Start automatic sliding immediately after the page loads
    setTimeout(function() {
        carouselInstance.next();
    }, 4000);
});

  </script>
</html>